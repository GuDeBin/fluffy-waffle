# 轻量云服务器 Ubuntu 升级

买的轻量云服务器使用的镜像是 Ubuntu20.04，但是 Ubuntu 已经推出了新的长期支持版，Ubuntu22.04，所以在服务器内进行一些升级，以下是升级经历

## 前期准备

首先确认自己的版本，在命令行使用

```sh
lsb_release -a
```

确认自己的 Ubuntu 版本是不是 20.04，因为 Ubuntu 升级只能一级一级升级

**官网说明**

从一个 LTS 到下一个 LTS 版本的页面只能在第一个点发布之后才可用。例如，Ubuntu 18.04 LTS 只会在 20.04.1 点发布后升级到 Ubuntu 20.04 LTS。如果用户希望在点发布之前更新(例如，在计算机的子集上评估 LTS 升级)，用户可以通过-d 标志强制升级。

在确定后，将系统更新到最新

```sh
sudo apt update
sudo apt upgrade
```

**备份数据**

备份所有数据。升级通常是安全的，然而，总有出错的机会。将数据安全地复制到备份位置，以便在升级过程中出现任何问题或并发症时进行恢复，这一点极为重要。

## 升级

Ubuntu 升级推荐使用 do-release-upgrade 命令来升级

```sh
sudo do-release-upgrade
```

接下来全是 y（同意）和保持默认设置，这里有一个我试了很多遍的教训吧，云服务器并不是真的给你一个物理服务器，而是虚拟，有些功能写在了 Ubuntu 的配置中，一旦有跟新配置的命令，选择默认即可，也就是保存不变，这里我犯了一个错误，就是所有都安装，其实默认更好。结果修改后的配置直接导致我的 root 用户不可用，ssh 远程连接也被阻止。

## 最后

执行 autoremove 命令，清除系统不再使用的软件

```sh
sudo apt autoremove
```

还有一个我很在意的，系统占用的内存直接到了 4.3G，好难受的说，虽然对我使用没有什么影响，但是。。。慢慢适应
